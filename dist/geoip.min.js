/*! geoip_resolver 2016-03-31 */
+function(a){"function"==typeof define&&define.amd?define("nytint-geoip",[],a):window.nytint_geoip=a()}(function(){"use strict";var a="nyt-geoip",b=document.getElementsByTagName("html"),c=!1,d=["country_code","region","dma_code","postal_code"],e=function(b){var c=new XMLHttpRequest,d=null,e=null;try{if(d=JSON.parse(sessionStorage.getItem(a)),d&&void 0!==d.country_code)return g(d,b),d}catch(h){}c.onload=function(a){return a.target?(e=f(a.target),"undefined"==typeof e?!1:(g(e,b),e)):!1},c.onreadystatechange=function(){4===c.readyState&&200!==c.status&&console.error(c.status)},c.open("GET","http://geoip.newsdev.nytimes.com/",!0);try{c.responseType="json"}catch(h){}c.send()},f=function(a){var b=null;switch(!0){case"json"===a.responseType:b=a.response.data;break;case null!==a.response:b=JSON.parse(a.response).data;break;case null!==a.responseText:b=JSON.parse(a.responseText).message}return void 0!==b?b:null},g=function(e,f){if(!b)return console.error("HTML tag is missing?"),!1;try{sessionStorage.setItem(a,JSON.stringify(e))}catch(g){console.warn("no sessionStorage")}if(void 0!==e&&!c){for(var h,i=0;h=d[i];i++){if(void 0===e[h])return null;var j=["geo",h.replace("_code",""),e[h]].join("-");b[0].classList.add(j)}c=!0}return"function"==typeof f&&f(e),e};return window.NYTINT_TESTING||e(),e});